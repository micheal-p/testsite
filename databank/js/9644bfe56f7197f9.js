(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,420777,e=>{"use strict";let t=(0,e.i(172955).createEmptyActor)(),n=t,r=new Set;function i(e){return e===t}function o(e){for(let t of(n=e,r))t()}e.s(["actor",()=>n,"emptyActor",()=>t,"isEmptyActor",()=>i,"listeners",()=>r,"setActor",()=>o])},776345,e=>{"use strict";function t(e){return e.split(/[[.\]]/g).filter(Boolean).map(e=>{var t;return e.includes("==")?function(e){let[t,n]=e.split("==");if("_key"!==t)throw Error(`Currently only "_key" is supported as path segment. Found ${t}`);if(typeof n>"u")throw Error('Invalid path segment, expected `key=="value"`');return{_key:n.replace(/^['"]/,"").replace(/['"]$/,"")}}(e):n.test(t=e)?Number(t):t})}let n=/^-?\d+$/,r=/^[a-z_$]+/;function i(e){return e.map((e,t)=>{var n;return n=0===t,Array.isArray(e)?`[${e[0]}:${e[1]||""}]`:"number"==typeof e?`[${e}]`:"object"==typeof e&&"_key"in e&&"string"==typeof e._key?`[_key==${JSON.stringify(e._key)}]`:"string"==typeof e&&r.test(e)?n?e:`.${e}`:`['${e}']`}).join("")}function o(e){if("createIfNotExists"in e)return{type:"createIfNotExists",document:e.createIfNotExists};if("createOrReplace"in e)return{type:"createOrReplace",document:e.createOrReplace};if("create"in e)return{type:"create",document:e.create};if("delete"in e)return{id:e.delete.id,type:"delete"};if("patch"in e){var n,r,i,o,s,u;return{type:"patch",id:e.patch.id,patches:[..."set"in(r=n=e.patch)?Object.keys(r.set).map(e=>({path:t(e),op:{type:"set",value:r.set[e]}})):[],..."setIfMissing"in(i=n)?Object.keys(i.setIfMissing).map(e=>({path:t(e),op:{type:"setIfMissing",value:i.setIfMissing[e]}})):[],..."unset"in(o=n)?o.unset.map(e=>({path:t(e),op:{type:"unset"}})):[],..."inc"in(s=n)?Object.keys(s.inc).map(e=>({path:t(e),op:{type:"inc",amount:s.inc[e]}})):[],..."inc"in(u=n)?Object.keys(u.dec).map(e=>({path:t(e),op:{type:"dec",amount:u.dec[e]}})):[],...function(e){if(!("insert"in e))return[];let n=function(e){let t=a.filter(t=>t in e);if(t.length>1)throw Error(`Insert patch is ambiguous. Should only contain one of: ${a.join(", ")}, instead found ${t.join(", ")}`);return t[0]}(e.insert);if(!n)throw Error("Insert patch missing position");let r=t(e.insert[n]),i=r.pop();return[{path:r,op:{type:"insert",position:n,referenceItem:i,items:e.insert.items}}]}(n)]}}throw Error(`Unknown mutation: ${JSON.stringify(e)}`)}let a=["before","replace","after"];function s(e){return l(e)}function u(e){return e.flatMap(s)}function l(e){if("create"===e.type||"createIfNotExists"===e.type||"createOrReplace"===e.type)return{[e.type]:e.document};if("delete"===e.type)return{delete:{id:e.id}};let t=e.options?.ifRevision;return e.patches.map(n=>({patch:{id:e.id,...t&&{ifRevisionID:t},...function(e){let{path:t,op:n}=e;if("unset"===n.type)return{unset:[i(t)]};if("insert"===n.type)return{insert:{[n.position]:i([...t,n.referenceItem]),items:n.items}};if("diffMatchPatch"===n.type)return{diffMatchPatch:{[i(t)]:n.value}};if("inc"===n.type)return{inc:{[i(t)]:n.amount}};if("dec"===n.type)return{dec:{[i(t)]:n.amount}};if("set"===n.type||"setIfMissing"===n.type)return{[n.type]:{[i(t)]:n.value}};if("truncate"===n.type){let e=[n.startIndex,"number"==typeof n.endIndex?n.endIndex:""].join(":");return{unset:[`${i(t)}[${e}]`]}}if("upsert"===n.type)return{unset:n.items.map(e=>i([...t,{_key:e._key}])),insert:{[n.position]:i([...t,n.referenceItem]),items:n.items}};if("assign"===n.type)return{set:Object.fromEntries(Object.keys(n.value).map(e=>[i(t.concat(e)),n.value[e]]))};if("unassign"===n.type)return{unset:n.keys.map(e=>i(t.concat(e)))};if("replace"===n.type)return{insert:{replace:i(t.concat(n.referenceItem)),items:n.items}};if("remove"===n.type)return{unset:[i(t.concat(n.referenceItem))]};throw Error(`Unknown operation type ${n.type}`)}(n)}}))}function c(e){return Array.isArray(e)?e:[e]}var d=Object.freeze({__proto__:null,decode:function(e){return o(e)},decodeAll:function(e){return e.map(o)},encode:s,encodeAll:u,encodeMutation:l,encodeTransaction:function(e){return{transactionId:e.id,mutations:u(e.mutations)}}});function p(e,t,n){return{type:"insert",referenceItem:n,position:t,items:c(e)}}function y(e,t){return{type:"truncate",startIndex:e,endIndex:t}}function f(e){return{type:"remove",referenceItem:e}}function m(e,t,n){return{type:"patch",id:e,patches:c(t),...n?{options:n}:{}}}function h(e,n){return{path:"string"==typeof e?t(e):e,op:n}}function g(e){return{type:"createIfNotExists",document:e}}e.s(["SanityEncoder",()=>d,"at",()=>h,"createIfNotExists",()=>g,"insert",()=>p,"patch",()=>m,"remove",()=>f,"truncate",()=>y],776345)},951456,6046,680683,e=>{"use strict";let t,n;var r,i,o,a,s,u=e.i(243460),l=e.i(809902),c=e.i(871715),d=e.i(420777),p=e.i(776345),y=e.i(620012),f=e.i(763988);let m=/_key\s*==\s*['"](.*)['"]/,h=/^\d*:\d*$/;function g(e){return"number"==typeof e||"string"==typeof e&&/^\[\d+\]$/.test(e)}function v(e){return"string"==typeof e?m.test(e.trim()):"object"==typeof e&&"_key"in e}let b=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,w=/_key\s*==\s*['"](.*)['"]/;function x(e,t,n){let r="string"==typeof t?function(e){if("string"!=typeof e)throw Error("Path is not a string");let t=e.match(b);if(!t)throw Error("Invalid path string");return t.map(E)}(t):t;if(!Array.isArray(r))throw Error("Path must be an array or a string");let i=e;for(let e=0;e<r.length;e++){let t=r[e];if(g(t)){if(!Array.isArray(i))return n;i=i[t]}if(v(t)){if(!Array.isArray(i))return n;i=i.find(e=>e._key===t._key)}if("string"==typeof t&&(i="object"==typeof i&&null!==i?i[t]:void 0),typeof i>"u")return n}return i}function E(e){return g(e)?Number(e.replace(/[^\d]/g,"")):v(e)?{_key:e.match(w)[1]}:!function(e){if("string"==typeof e&&h.test(e))return!0;if(!Array.isArray(e)||2!==e.length)return!1;let[t,n]=e;return("number"==typeof t||""===t)&&("number"==typeof n||""===n)}(e)?e:function(e){let[t,n]=e.split(":").map(e=>""===e?e:Number(e));return[t,n]}(e)}function k(){return(0,c.useSyncExternalStore)(A,S,I)}function I(){return d.emptyActor}function S(){return d.actor}function A(e){return d.listeners.add(e),()=>d.listeners.delete(e)}function O(){let e,t=(0,u.c)(2),n=k();return t[0]!==n?(e=(0,d.isEmptyActor)(n),t[0]=n,t[1]=e):e=t[1],!e}function M(e,t){let n;return(...r)=>{clearTimeout(n),n=setTimeout(()=>{e.apply(e,r)},t)}}function T(e,t){let n=(0,y.isMaybePreviewIframe)(),r=(0,y.isMaybePreviewWindow)();if((0,d.isEmptyActor)(t)||!n&&!r)throw Error("The `useDocuments` hook cannot be used in this context");let i=(0,l.getDraftId)(e),o=(0,l.getPublishedId)(e),a=t.getSnapshot().context?.documents,s=a?.[i],u=a?.[o],c=s||u;if(!c)throw Error(`Document "${e}" not found`);let p=s.getSnapshot().context?.local||u.getSnapshot().context?.local,f=new Promise(e=>{if(p)e(p);else{let t=c.on("ready",n=>{let{snapshot:r}=n;e(r||null),t.unsubscribe()})}});return{draftDoc:s,draftId:i,getSnapshot:()=>f,publishedDoc:u,publishedId:o,get snapshot(){if(!p)throw Error(`Snapshot for document "${e}" not found`);return p}}}function N(){let e,t,n,r=(0,u.c)(7),i=k();r[0]!==i?(e=e=>({id:e,commit:()=>{let{draftDoc:t}=T(e,i);t.send({type:"submit"})},get:t=>{let{snapshot:n}=T(e,i);return t?x(n,t):n},getSnapshot:function(e,t){let{getSnapshot:n}=T(e,t);return n}(e,i),patch:async(t,n)=>{let r=T(e,i),{draftDoc:o,draftId:a,getSnapshot:s,publishedId:u}=r,{commit:l=!0}=n||{},c=await ("function"==typeof t?t({draftId:a,publishedId:u,get snapshot(){return r.snapshot},getSnapshot:s}):t),d=await s();if(!d)throw Error(`Snapshot for document "${e}" not found`);o.send({type:"mutate",mutations:[(0,p.createIfNotExists)({...d,_id:a}),(0,p.patch)(a,c)]}),l&&("object"==typeof l&&"debounce"in l?M(()=>o.send({type:"submit"}),l.debounce)():o.send({type:"submit"}))}}),r[0]=i,r[1]=e):e=r[1];let o=e;r[2]!==i?(t=(e,t,n)=>{let{draftDoc:r}=T(e,i),{commit:o}=n||{},a=void 0===o||o;r.send({type:"mutate",mutations:t}),a&&("object"==typeof a&&"debounce"in a?M(()=>r.send({type:"submit"}),a.debounce)():r.send({type:"submit"}))},r[2]=i,r[3]=t):t=r[3];let a=t;return r[4]!==o||r[5]!==a?(n={getDocument:o,mutateDocument:a},r[4]=o,r[5]=a,r[6]=n):n=r[6],n}function j(e){let t=(()=>{if(n)return n;n=[];for(let e=0;e<256;++e)n[e]=(e+256).toString(16).slice(1);return n})();return(function(e=16){let t=new Uint8Array(e);return(0,f.default)(t),t})(e).reduce((e,n)=>e+t[n],"").slice(0,e)}function L(e){let t,n,r="string"==typeof e?e:e.path,i=r.lastIndexOf("."),o=r.substring(i+1,r.length);if(!o.indexOf("["))throw Error("Invalid path: not an array");let a=r.lastIndexOf("["),s=r.substring(0,a);if(o.includes("_key")){let e=o.indexOf('"')+1,r=o.indexOf('"',e);t=o.substring(e,r),n=!0}else{let e=o.indexOf("[")+1,r=o.indexOf("]",e);t=o.substring(e,r),n=!1}if(!s||!t)throw Error("Invalid path");return{path:s,key:t,hasExplicitKey:n}}function P(e,t,n="after"){let{path:r,key:i}=L(e),o={...x(t,e.path),_key:j()};return[(0,p.at)(r,(0,p.insert)(o,n,{_key:i}))]}function _(e,t){let{path:n,key:r}=L(e),i=x(t,n).findIndex(e=>e._key===r);return[(0,p.at)(n,(0,p.truncate)(i,i+1))]}function $(e,t,n){let{path:r,key:i}=L(e),o=j();return[(0,p.at)(r,(0,p.insert)([{_type:t,_key:o}],n,{_key:i}))]}async function C(e,t,n){if(!e.type)throw Error("Node type is missing");let{path:r,key:i}=L(e),o=await t.getSnapshot(),a=x(o,r),s=x(o,e.path),u=a.findIndex(e=>e._key===i),l=-1,c="before";if("first"===n){if(0===u)return[];l=0,c="before"}else if("last"===n){if(u===a.length-1)return[];l=-1,c="after"}else if("next"===n){if(u===a.length-1)return[];l=u,c="after"}else if("previous"===n){if(0===u)return[];l=u-1,c="before"}return[(0,p.at)(r,(0,p.truncate)(u,u+1)),(0,p.at)(r,(0,p.insert)(s,c,l))]}function R(e){return{lang:e?.lang??i?.lang,message:e?.message,abortEarly:e?.abortEarly??i?.abortEarly,abortPipeEarly:e?.abortPipeEarly??i?.abortPipeEarly}}function U(e,t,n,r,i){var u,l,c,d;let p,y=i&&"input"in i?i.input:n.value,f=i?.expected??e.expects??null,m=i?.received??("string"==(p=typeof y)?`"${y}"`:"number"===p||"bigint"===p||"boolean"===p?`${y}`:"object"===p||"function"===p?(y&&Object.getPrototypeOf(y)?.constructor?.name)??"null":p),h={kind:e.kind,type:e.type,input:y,expected:f,received:m,message:`Invalid ${t}: ${f?`Expected ${f} but r`:"R"}eceived ${m}`,requirement:e.requirement,path:i?.path,issues:i?.issues,lang:r.lang,abortEarly:r.abortEarly,abortPipeEarly:r.abortPipeEarly},g="schema"===e.kind,v=i?.message??e.message??(u=e.reference,l=h.lang,s?.get(u)?.get(l))??(g?(c=h.lang,a?.get(c)):null)??r.message??(d=h.lang,o?.get(d));void 0!==v&&(h.message="function"==typeof v?v(h):v),g&&(n.typed=!1),n.issues?n.issues.push(h):n.issues=[h]}function D(e){return{version:1,vendor:"valibot",validate:t=>e["~run"]({value:t},R())}}e.s(["get",()=>x,"getArrayDuplicatePatches",()=>P,"getArrayInsertPatches",()=>$,"getArrayItemKeyAndParentPath",()=>L,"getArrayMovePatches",()=>C,"getArrayRemovePatches",()=>_,"useDocuments",()=>N,"useOptimisticActor",()=>k,"useOptimisticActorReady",()=>O],6046);var G=class extends Error{constructor(e){super(e[0].message),this.name="ValiError",this.issues=e}};function Y(e,t){return{kind:"validation",type:"min_length",reference:Y,async:!1,expects:`>=${e}`,requirement:e,message:t,"~run"(e,t){return e.typed&&e.value.length<this.requirement&&U(this,"length",e,t,{received:`${e.value.length}`}),e}}}function q(e,t,n){return"function"==typeof e.fallback?e.fallback(t,n):e.fallback}function z(e,t,n){return"function"==typeof e.default?e.default(t,n):e.default}function H(e,t){return{kind:"schema",type:"object",reference:H,expects:"Object",async:!1,entries:e,message:t,get"~standard"(){return D(this)},"~run"(e,t){let n=e.value;if(n&&"object"==typeof n)for(let r in e.typed=!0,e.value={},this.entries){let i=this.entries[r];if(r in n||("exact_optional"===i.type||"optional"===i.type||"nullish"===i.type)&&void 0!==i.default){let o=r in n?n[r]:z(i),a=i["~run"]({value:o},t);if(a.issues){let i={type:"object",origin:"value",input:n,key:r,value:o};for(let t of a.issues)t.path?t.path.unshift(i):t.path=[i],e.issues?.push(t);if(e.issues||(e.issues=a.issues),t.abortEarly){e.typed=!1;break}}a.typed||(e.typed=!1),e.value[r]=a.value}else if(void 0!==i.fallback)e.value[r]=q(i);else if("exact_optional"!==i.type&&"optional"!==i.type&&"nullish"!==i.type&&(U(this,"key",e,t,{input:void 0,expected:`"${r}"`,path:[{type:"object",origin:"key",input:n,key:r,value:n[r]}]}),t.abortEarly))break}else U(this,"type",e,t);return e}}}function W(e,t){return{kind:"schema",type:"optional",reference:W,expects:`(${e.expects} | undefined)`,async:!1,wrapped:e,default:t,get"~standard"(){return D(this)},"~run"(e,t){return void 0===e.value&&(void 0!==this.default&&(e.value=z(this,e,t)),void 0===e.value)?(e.typed=!0,e):this.wrapped["~run"](e,t)}}}function J(e){return{kind:"schema",type:"string",reference:J,expects:"string",async:!1,message:e,get"~standard"(){return D(this)},"~run"(e,t){return"string"==typeof e.value?e.typed=!0:U(this,"type",e,t),e}}}function V(...e){return{...e[0],pipe:e,get"~standard"(){return D(this)},"~run"(t,n){for(let r of e)if("metadata"!==r.kind){if(t.issues&&("schema"===r.kind||"transformation"===r.kind)){t.typed=!1;break}t.issues&&(n.abortEarly||n.abortPipeEarly)||(t=r["~run"](t,n))}return t}}}function B(e,t,n){let r=e["~run"]({value:t},R(n));return{typed:r.typed,success:!r.issues,output:r.value,issues:r.issues}}let K=V(J(),Y(1)),X=W(K),F=H({baseUrl:K,dataset:X,id:K,path:K,projectId:X,tool:X,type:X,workspace:X,perspective:{...r=J(),fallback:"drafts",get"~standard"(){return D(this)},"~run"(e,t){let n=r["~run"](e,t);return n.issues?{typed:!0,value:q(this,n,t)}:n}}});function Q(e){return!F["~run"]({value:e},{abortEarly:!0}).issues}function Z(e){let t="";for(let n of e){if("string"==typeof n){t&&(t+="."),t+=n;continue}if("number"==typeof n){t&&(t+=":"),t+=`${n}`;continue}if(null!==n&&Array.isArray(n)){t&&(t+=":"),t+=`${n.join(",")}}`;continue}if(n._key){t&&(t+=":"),t+=`${n._key}`;continue}}return t}let ee=/^([\w-]+):(0|[1-9][0-9]*)$/,et=/^([\w-]+):([0-9]+),([0-9]+)$/,en=/^([\w-]+):([\w-]+)$/,er=V(J(),Y(1)),ei=H({origin:er,href:er,data:W(function e(t,n,r){return{kind:"schema",type:"record",reference:e,expects:"Object",async:!1,key:t,value:n,message:r,get"~standard"(){return D(this)},"~run"(e,t){let n=e.value;if(n&&"object"==typeof n){for(let r in e.typed=!0,e.value={},n)if(Object.hasOwn(n,r)&&"__proto__"!==r&&"prototype"!==r&&"constructor"!==r){let i=n[r],o=this.key["~run"]({value:r},t);if(o.issues){let a={type:"object",origin:"key",input:n,key:r,value:i};for(let t of o.issues)t.path=[a],e.issues?.push(t);if(e.issues||(e.issues=o.issues),t.abortEarly){e.typed=!1;break}}let a=this.value["~run"]({value:i},t);if(a.issues){let o={type:"object",origin:"value",input:n,key:r,value:i};for(let t of a.issues)t.path?t.path.unshift(o):t.path=[o],e.issues?.push(t);if(e.issues||(e.issues=a.issues),t.abortEarly){e.typed=!1;break}}o.typed&&a.typed||(e.typed=!1),o.typed&&(e.value[o.value]=a.value)}}else U(this,"type",e,t);return e}}}(J(),function e(){return{kind:"schema",type:"unknown",reference:e,expects:"unknown",async:!1,get"~standard"(){return D(this)},"~run":e=>(e.typed=!0,e)}}()))});function eo(e){let t=B(F,e);if(t.success)return t.output;let n=B(ei,e);if(n.success)try{let e=new URL(n.output.href,typeof document>"u"?"https://example.com":location.origin);return e.searchParams.size>0?function(e,t,n){let r=e["~run"]({value:t},R(void 0));if(r.issues)throw new G(r.issues);return r.value}(F,Object.fromEntries(e.searchParams.entries())):n.output}catch(e){return console.error("Failed to parse sanity node",e),n.output}}function ea(e){if("object"==typeof e&&null!==e)return eo(e);try{let t=JSON.parse(e);return eo(t)}catch{let t=e.split(";").reduce((e,t)=>{let[n,r]=t.split("=");if(!n||t.includes("=")&&!r)return e;switch(n){case"id":e.id=r;break;case"type":e.type=r;break;case"path":e.path=l.studioPath.toString(function(e){let t=[];for(let n of e.split(".")){let e=ee.exec(n);if(e){t.push(e[1],Number(e[2]));continue}let r=et.exec(n);if(r){t.push(r[1],[Number(r[2]),Number(r[3])]);continue}let i=en.exec(n);if(i){t.push(i[1],{_key:i[2]});continue}t.push(n)}return t}(r));break;case"base":e.baseUrl=decodeURIComponent(r);break;case"perspective":e.perspective=r;break;case"tool":e.tool=r;break;case"workspace":e.workspace=r;break;case"projectId":e.projectId=r;break;case"dataset":e.dataset=r}return e},{});if(Q(t))return t;return}}e.s(["createDataAttribute",()=>function e(t){function n(e){return e?"string"==typeof e?l.studioPath.fromString(e):e:[]}function r(e){if(!e.id)throw Error("`id` is required to create a data attribute");if(!e.type)throw Error("`type` is required to create a data attribute");if(!e.path||!e.path.length)throw Error("`path` is required to create a data attribute");return function(e){let{id:t,path:n,baseUrl:r,tool:i,workspace:o,type:a}=e;return Q(e)?[["id",(0,l.getPublishedId)(t)],["type",a],["path",Z(l.studioPath.fromString(n))],["base",encodeURIComponent(r)],["workspace",o],["tool",i]].filter(([,e])=>!!e).map(e=>e.join("=")).join(";"):void 0}({baseUrl:e.baseUrl||"/",workspace:e.workspace,tool:e.tool,type:e.type,id:e.id,path:"string"==typeof e.path?e.path:l.studioPath.toString(e.path),perspective:e.perspective})}let i=e=>r({...t,path:[...n(t.path),...n(e)]});return i.toString=function(){return r(t)},i.combine=function(n){return e({...t,...n})},i.scope=function(r){return e({...t,path:[...n(t.path),...n(r)]})},i},"decodeSanityNodeData",()=>ea,"pathToUrlString",()=>Z],680683);var es={0:8203,1:8204,2:8205,3:8290,4:8291,5:8288,6:65279,7:8289,8:119155,9:119156,a:119157,b:119158,c:119159,d:119160,e:119161,f:119162},eu={0:8203,1:8204,2:8205,3:65279},el=[,,,,].fill(String.fromCodePoint(eu[0])).join(""),ec=Object.fromEntries(Object.entries(eu).map(e=>e.reverse())),ed=Object.fromEntries(Object.entries(es).map(e=>e.reverse())),ep=`${Object.values(es).map(e=>`\\u{${e.toString(16)}}`).join("")}`,ey=RegExp(`[${ep}]{4,}`,"gu");function ef(e,t){let n,r,i,o,a,s,p,y,f,m=(0,u.c)(17),[h,g]=(0,c.useState)(!0),[v,b]=(0,c.useState)(e),[w,x]=(0,c.useState)(null),[E,I]=(0,c.useState)(e),S=k(),A=(0,c.useRef)(null);m[0]!==t?(n=()=>{A.current=(e,n)=>(Array.isArray(t)?t:[t]).reduce((t,n)=>n(t,{document:e.document,id:(0,l.getPublishedId)(e.id),originalId:e.id,type:e.type}),n)},r=[t],m[0]=t,m[1]=n,m[2]=r):(n=m[1],r=m[2]),(0,c.useInsertionEffect)(n,r),m[3]!==e?(i=()=>I(e),m[3]=e,m[4]=i):i=m[4];let O=(0,c.useRef)(i);return m[5]!==e?(o=()=>{O.current=()=>I(e)},a=[e],m[5]=e,m[6]=o,m[7]=a):(o=m[6],a=m[7]),(0,c.useInsertionEffect)(o,a),m[8]!==S?(s=()=>{let e;if((0,d.isEmptyActor)(S))return;let t=S.on("rebased.local",t=>{let n={document:t.document,id:t.id,originalId:(0,l.getPublishedId)(t.id),type:"mutate"};b(e=>A.current?A.current(n,e):e),x(n),O.current(),g(!1),clearTimeout(e)}),n=S.on("pristine",()=>{e=setTimeout(()=>{(0,c.startTransition)(()=>g(!0))},15e3)});return()=>{t.unsubscribe(),n.unsubscribe()}},p=[S],m[8]=S,m[9]=s,m[10]=p):(s=m[9],p=m[10]),(0,c.useEffect)(s,p),m[11]!==w||m[12]!==E||m[13]!==e||m[14]!==h?(y=()=>{if(!h){if(!w)throw Error("No last event found when syncing passthrough");E!==e&&(0,c.startTransition)(()=>{b(A.current?A.current(w,e):e),I(e)})}},f=[w,E,e,h],m[11]=w,m[12]=E,m[13]=e,m[14]=h,m[15]=y,m[16]=f):(y=m[15],f=m[16]),(0,c.useEffect)(y,f),h?e:v}let em=[];for(let e=0;e<256;++e)em.push((e+256).toString(16).slice(1));let eh=new Uint8Array(16);var eg="u">typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);function ev(e,n,r){if(eg&&!e)return eg();let i=(e=e||{}).random??e.rng?.()??function(){if(!t){if(typeof crypto>"u"||!crypto.getRandomValues)throw Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");t=crypto.getRandomValues.bind(crypto)}return t(eh)}();if(i.length<16)throw Error("Random bytes length must be >= 16");return i[6]=15&i[6]|64,i[8]=63&i[8]|128,function(e,t=0){return(em[e[t+0]]+em[e[t+1]]+em[e[t+2]]+em[e[t+3]]+"-"+em[e[t+4]]+em[e[t+5]]+"-"+em[e[t+6]]+em[e[t+7]]+"-"+em[e[t+8]]+em[e[t+9]]+"-"+em[e[t+10]]+em[e[t+11]]+em[e[t+12]]+em[e[t+13]]+em[e[t+14]]+em[e[t+15]]).toLowerCase()}(i)}function eb(e){let t=e.getBoundingClientRect();return{x:t.x+scrollX,y:t.y+scrollY,w:t.width,h:t.height}}function ew(e,t,n){return"x"===n?{x:e.x+t,y:e.y,w:e.w-2*t,h:e.h}:{x:e.x,y:e.y+t,w:e.w,h:e.h-2*t}}function ex(e,t){return e.x===t.x&&e.y===t.y&&e.w===t.w&&e.h===t.h}function eE(e,t){let n=e.x-t.x,r=e.y-t.y;return Math.sqrt(n*n+r*r)}function ek(e,t,n){let r,i,o={x:e.x1,y:e.y1};if(t.some(e=>{var t;let r,i;return t=ew(e,Math.min(e.w,e.h)/10,"horizontal"===n?"x":"y"),r=o.x>=t.x&&o.x<=t.x+t.w,i=o.y>=t.y&&o.y<=t.y+t.h,r&&i}))return null;for(let a of t){let t=function(e,t){let n=[{x1:t.x,y1:t.y,x2:t.x+t.w,y2:t.y},{x1:t.x+t.w,y1:t.y,x2:t.x+t.w,y2:t.y+t.h},{x1:t.x+t.w,y1:t.y+t.h,x2:t.x,y2:t.y+t.h},{x1:t.x,y1:t.y+t.h,x2:t.x,y2:t.y}],r=[];for(let t=0;t<n.length;t++){let i=function(e,t){let{x1:n,y1:r,x2:i,y2:o}=e,{x1:a,y1:s,x2:u,y2:l}=t;if(n===i&&r===o||a===u&&s===l)return!1;let c=(l-s)*(i-n)-(u-a)*(o-r);if(0===c)return!1;let d=((u-a)*(r-s)-(l-s)*(n-a))/c,p=((i-n)*(r-s)-(o-r)*(n-a))/c;return!(d<0)&&!(d>1)&&!(p<0)&&!(p>1)&&{x:n+d*(i-n),y:r+d*(o-r)}}(e,n[t]);if(i){let e=!1;for(let t=0;t<r.length;t++)r[t].x===i.x&&r[t].y===i.y&&(e=!0);e||r.push(i)}}return 0!==r.length&&r.sort((t,n)=>eE(t,{x:e.x1,y:e.y1})-eE(n,{x:e.x1,y:e.y1}))}(e,ew(a,Math.min(a.w,a.h)/10,"horizontal"===n?"x":"y"));if(t){let e=t[0];r?eE(o,e)<eE(o,r)&&(r=e,i=a):(r=e,i=a)}}return i||null}function eI(e,t,n){let{x:r,y:i,w:o,h:a}=e,{x:s,y:u}=n;return{x:s+(r-s)*t,y:u+(i-u)*t,w:o*t,h:a*t}}function eS(e){let t=Math.max(0,Math.min(...e.map(e=>e.y))),n=Math.min(document.body.scrollHeight,Math.max(...e.map(e=>e.y+e.h)));return{min:t,max:n,height:n-t}}function eA(e,t){return t.find(t=>ex(eb(t.elements.element),e))?.sanity}function eO(e,t,n){return Object.values(t).every(e=>null===e)?null:"horizontal"===n?{left:t.left?{rect:t.left,sanity:eA(t.left,e)}:null,right:t.right?{rect:t.right,sanity:eA(t.right,e)}:null}:{top:t.top?{rect:t.top,sanity:eA(t.top,e)}:null,bottom:t.bottom?{rect:t.bottom,sanity:eA(t.bottom,e)}:null}}function eM(e){let t=document.body.getBoundingClientRect();return{x:Math.max(t.x,Math.min(e.clientX,t.x+t.width)),y:e.clientY+window.scrollY}}function eT(e,t,n){let r=eb(t),i=[...t.querySelectorAll(":where(h1, h2, h3, h4, p, a, img, span, button):not(:has(*))")];e.x<=r.x&&(e.x=r.x),e.x>=r.x+r.w&&(e.x=r.x+r.w),e.y>=r.y+r.h&&(e.y=r.y+r.h),e.y<=r.y&&(e.y=r.y);let o=i.map(e=>{let t=eI(eb(e),n,{x:r.x,y:r.y});return{x:t.x-r.x,y:t.y-r.y,w:t.w,h:t.h,tagName:e.tagName}});return{offsetX:(r.x-e.x)*n,offsetY:(r.y-e.y)*n,w:r.w*n,h:r.h*n,maxWidth:r.w*n*.75,childRects:o}}async function eN(e,t,n,r,i){return new Promise(o=>{e.addEventListener("transitionend",()=>{setTimeout(()=>{r({type:"overlay/dragEndMinimapTransition"})},2*i),o()},{once:!0}),r({type:"overlay/dragStartMinimapTransition"}),r({type:"overlay/dragToggleMinimap",display:!0}),document.body.style.overflow="hidden",document.body.style.height="100%",document.documentElement.style.overflow="initial",document.documentElement.style.height="100%",setTimeout(()=>{e.style.transformOrigin="50% 0px",e.style.transition="transform 150ms ease",e.style.transform=`translate3d(0px, ${-n+scrollY}px, 0px) scale(${t})`},25)})}function ej(e){let t,n,r=(t=Math.max(0,Math.min(...e.map(e=>e.x))),{min:t,max:n=Math.min(document.body.offsetWidth,Math.max(...e.map(e=>e.x+e.w))),width:n-t}),i=eS(e),o=r.min>8&&r.min+r.width<=window.innerWidth-8,a=i.min>8&&i.min+i.height<=document.body.scrollHeight-8,s=o&&a;return{x:s?r.min-8:r.min,y:s?i.min-8:i.min,w:s?r.width+16:r.width,h:s?i.height+16:i.height}}async function eL(e,t,n,r,i,o){return new Promise(a=>{if(1===new DOMMatrix(window.getComputedStyle(t).transform).a)return;let s=n-window.innerHeight,u=scrollY;(e-=window.innerHeight/2)<0&&(e=0),t.addEventListener("transitionend",()=>{t.style.transition="none",t.style.transform="none",scrollTo({top:e,behavior:"instant"}),setTimeout(()=>{r({type:"overlay/dragEndMinimapTransition"}),r({type:"overlay/dragToggleMinimap",display:!1})},2*i),a()},{once:!0}),r({type:"overlay/dragStartMinimapTransition"}),t.style.transform=`translateY(${Math.max(u-e,-s+u)}px) scale(1)`,o&&(document.body.style.overflow=o.body.overflow,document.body.style.height=o.body.height,document.documentElement.style.overflow=o.documentElement.overflow,document.documentElement.style.height=o.documentElement.height)})}let eP=!1,e_={y:0},e$={x:0,y:0},eC=typeof document>"u"?0:document.documentElement.scrollHeight,eR=null,eU=e=>e instanceof HTMLElement||e instanceof SVGElement,eD=e=>e&&eU(e)?e.dataset?.sanityOverlayElement?e:eD(e.parentElement):null;function eG(e){return ey.lastIndex=0,ey.test(e)}function eY(e,t=!1){return eG(e)?function(e,t=!1){try{let n=function(e){let t=e.match(ey);if(t)return function(e,t=!1){let n=Array.from(e);if(n.length%2==0){if(n.length%4||!e.startsWith(el))return function(e,t){var n;let r=[];for(let t=.5*e.length;t--;){let n=`${ed[e[2*t].codePointAt(0)]}${ed[e[2*t+1].codePointAt(0)]}`;r.unshift(String.fromCharCode(parseInt(n,16)))}let i=[],o=[r.join("")],a=10;for(;o.length;){let e=o.shift();try{if(i.push(JSON.parse(e)),t)break}catch(r){if(!a--)throw r;let t=+(null==(n=r.message.match(/\sposition\s(\d+)$/))?void 0:n[1]);if(!t)throw r;o.unshift(e.substring(0,t),e.substring(t))}}return i}(n,t)}else throw Error("Encoded data has invalid length");let r=[];for(let e=.25*n.length;e--;){let t=n.slice(4*e,4*e+4).map(e=>ec[e.codePointAt(0)]).join("");r.unshift(String.fromCharCode(parseInt(t,4)))}if(t){r.shift();let e=r.indexOf("\0");return -1===e&&(e=r.length),[JSON.parse(r.slice(0,e).join(""))]}return r.join("").split("\0").filter(Boolean).map(e=>JSON.parse(e))}(t[0],!0)[0]}(e);return n&&"sanity.io"===n.origin?(t&&(n.href=n.href?.replace(".alt","")),n):null}catch(t){return console.error("Failed to decode stega for string: ",e,"with the original error: ",t),null}}(e,t):null}function eq(e){return"path"in e}function ez(e){if(!e.length||!e.map(e=>eq(e)).every((e,t,n)=>e===n[0]))return;if(!eq(e[0]))return e[0];let t=e.filter(eq),n=e[0],r=["projectId","dataset","id","baseUrl","workspace","tool"];for(let e=1;e<t.length;e++){let i=t[e];if(r.some(e=>i[e]!==n?.[e])){n=void 0;break}n={...n,path:function(e,t){let n=e.split("."),r=t.split("."),i=Math.min(n.length,r.length);return n=n.slice(0,i).reverse(),r=r.slice(0,i).reverse(),n.reduce((e,t,n)=>t===r[n]?[...e,t]:[],[]).reverse().join(".")}(n.path,i.path)}}return n}function eH(e){let t=e.lastIndexOf(".");return e.substring(t,e.length).includes("[")}function eW(e){if(!eH(e))return null;let t=e.split(".");return t[t.length-1]=t[t.length-1].replace(/\[.*?\]/g,"[]"),t.join(".")}function eJ(e,t){return!!eH(e.path)&&!!eH(t.path)&&eW(e.path)===eW(t.path)}function eV(e,t,n,r){if(!e.getAttribute("data-sanity")||e.getAttribute("data-sanity-drag-disable")||!t||!eq(t)||!eH(t.path))return null;let i=e.getAttribute("data-sanity-drag-group"),o=[...n].reduce((e,n)=>{let o=r.get(n),a=n.getAttribute("data-sanity-drag-disable"),s=n.getAttribute("data-sanity-drag-group"),u=null!==n.getAttribute("data-sanity");return o?.sanity&&!a&&eq(o.sanity)&&eJ(t,o.sanity)&&(null===i||i===s)&&u&&e.push(o),e},[]);return o.length<=1?null:o}function eB({handler:e,overlayElement:t,inFrame:n,inPopUp:r,optimisticActorReady:i}){let o=!1,a=new Map,s=new WeakMap,u=new Set,l=new WeakMap,c=new WeakMap,d,p,y,f=!1,m=[],h=()=>m[m.length-1];function g(e,t){e.removeEventListener("click",t.click,{capture:!0}),e.removeEventListener("contextmenu",t.contextmenu,{capture:!0}),e.removeEventListener("mousemove",t.mousemove,{capture:!0}),e.removeEventListener("mousedown",t.mousedown,{capture:!0}),e.removeEventListener("mouseenter",t.mouseenter),e.removeEventListener("mouseleave",t.mouseleave)}function v({id:t,elements:n,handlers:r}){let{element:i,measureElement:o}=n;i.addEventListener("click",r.click,{capture:!0}),i.addEventListener("contextmenu",r.contextmenu,{capture:!0}),i.addEventListener("mousemove",r.mousemove,{once:!0,capture:!0}),i.addEventListener("mousedown",r.mousedown,{capture:!0}),d.observe(o),e({type:"element/activate",id:t})}function b({id:t,elements:n,handlers:r}){let{element:i,measureElement:o}=n;g(i,r),d.unobserve(o),m=m.filter(e=>e!==i),e({type:"element/deactivate",id:t})}function w(t){if(!(!n&&!r||!i))for(let n of m){if(t===n){let n=s.get(t)?.sanity;if(!n||!eq(n))return;if(eV(t,n,u,s)){let n=t.style.cursor;n&&c.set(t,n),e({type:"overlay/setCursor",element:t,cursor:"move"});continue}}x(n)}}function x(t){let n=c.get(t);e({type:"overlay/setCursor",element:t,cursor:n})}function E(c){for(let d of function e(t){let n=[];function r(e,t,n,r){let i=ea(t);if(!i)return;let o=function e(t){let{display:n}=window.getComputedStyle(t);if("inline"!==n)return t;let r=t.parentElement;return r?e(r):null}(e);if(o)return{elements:{element:e,measureElement:o},sanity:i,reason:n,preventGrouping:r}}if(t)for(let i of t.childNodes)!function t(i,o){let a=function(t){let{nodeType:n,parentElement:i,textContent:o}=t;if(t.nodeType===Node.ELEMENT_NODE&&t.dataset?.sanityEditTarget!==void 0){let n=ez(e(t).map(e=>"element"===e.type?e.commonSanity:void 0).filter(e=>void 0!==e));if(n)return{reason:"edit-target",elements:{element:t,measureElement:t},sanity:n}}else if(n===Node.TEXT_NODE&&i&&o){let e=eY(o);return e?r(i,e,"stega-text",!0):void 0}else if(t.nodeType===Node.ELEMENT_NODE){if("SCRIPT"===t.tagName||"SANITY-VISUAL-EDITING"===t.tagName)return;if(t.dataset?.sanity)return r(t,t.dataset.sanity,"data-attribute",!!(t.textContent&&eG(t.textContent)));if(t.dataset?.sanityEditInfo)return r(t,t.dataset.sanityEditInfo,"data-attribute",!!(t.textContent&&eG(t.textContent)));if("IMG"===t.tagName){let e=eY(t.alt,!0);return e?r(t,e,"stega-attribute"):void 0}if("TIME"===t.tagName){let e=eY(t.dateTime,!0);return e?r(t,e,"stega-attribute"):void 0}if("SVG"===t.tagName.toUpperCase()){if(!t.ariaLabel)return;let e=eY(t.ariaLabel,!0);return e?r(t,e,"stega-attribute"):void 0}}}(i),s=o;if(i.nodeType===Node.ELEMENT_NODE&&i.dataset?.sanityEditGroup!==void 0&&(s={type:"group",elements:{element:i,measureElement:i},targets:[]},n.push(s)),a){let e={elements:a.elements,sanity:a.sanity,reason:a.reason};s&&!a.preventGrouping?s.targets.push(e):n.push({elements:a.elements,type:"element",targets:[e]})}if(i.nodeType===Node.ELEMENT_NODE&&"IMG"!==i.tagName&&"SCRIPT"!==i.tagName&&"SANITY-VISUAL-EDITING"!==i.tagName)for(let e of i.childNodes)t(e,s)}(i,void 0);return n.map(e=>{if(0===e.targets.length&&"group"===e.type)return{...e,commonSanity:void 0};let t=1===e.targets.length?e.targets[0].sanity:ez(e.targets.map(({sanity:e})=>e).filter(e=>void 0!==e))||e.targets[0].sanity;return t?{...e,commonSanity:t}:null}).filter(e=>null!==e)}(c)){if("group"===d.type){for(let e of d.targets){let t=s.get(e.elements.element);t&&"element"===t.type&&k(e.elements.element)}0===d.targets.length&&k(d.elements.element)}if(!d.commonSanity)continue;let{element:c}=d.elements;s.has(c)?function(t){let{element:n}=t.elements,r=s.get(n);r&&(s.set(n,{...r,sanity:t.commonSanity}),e({type:"element/update",elementType:r.type,id:r.id,rect:eb(n),sanity:t.commonSanity,targets:t.targets.map(e=>({sanity:e.sanity,element:e.elements.element}))}))}(d):function({type:c,elements:d,commonSanity:y,targets:g}){let{element:b,measureElement:E}=d,k={click(t){let r=t.target;if(b===h()&&b.contains(r)){n&&(t.preventDefault(),t.stopPropagation());let r=s.get(b)?.sanity;r&&!f&&e({type:"element/click",id:I,sanity:r})}},contextmenu(t){if(!("path"in y)||!n&&!r||!i||!y.path.split(".").pop()?.includes("[_key=="))return;let o=t.target;b===h()&&b.contains(o)&&((n||r)&&(t.preventDefault(),t.stopPropagation()),e({type:"element/contextmenu",id:I,position:{x:t.clientX,y:t.clientY},sanity:y}))},mousedown(t){if(t.preventDefault(),t.currentTarget!==m.at(-1)||b.getAttribute("data-sanity-drag-disable")||!n&&!r||!i)return;let o=s.get(b)?.sanity;if(!o||!eq(o)||!eH(o.path))return;let a=eV(b,y,u,s);a&&function(e){var t;let{mouseEvent:n,element:r,overlayGroup:i,handler:o,target:a,onSequenceStart:s,onSequenceEnd:u}=e;if(0!==n.button)return;window.focus();let l=i.map(e=>eb(e.elements.element)),c=r.getAttribute("data-sanity-drag-flow")||((t=l).some(e=>t.filter(t=>!ex(e,t)).some(t=>e.y===t.y))?"horizontal":"vertical"),d=r.getAttribute("data-sanity-drag-group"),p=!!r.getAttribute("data-sanity-drag-minimap-disable"),y=!!r.getAttribute("data-sanity-drag-prevent-default"),f=r.getAttribute("data-unstable_sanity-drag-document-height"),m=r.getAttribute("data-unstable_sanity-drag-group-height"),h=null,g=eM(n),v=document.body,{minYScaled:b,scaleFactor:w}=function(e,t){let n=t||eS(e).height,r=(n+=200)>window.innerHeight?window.innerHeight/n:1,{min:i}=eS(e.map(e=>eI(e,r,{x:window.innerWidth/2,y:0})));return{scaleFactor:r,minYScaled:i-100*r}}(l,m?~~m:null),x=!1,E=!1,k=!0;eP||(eR={body:{overflow:window.getComputedStyle(document.body).overflow,height:window.getComputedStyle(document.body).height},documentElement:{overflow:window.getComputedStyle(document.documentElement).overflow,height:window.getComputedStyle(document.documentElement).height}},eC=f?~~f:document.documentElement.scrollHeight);let I=setInterval(()=>{l=i.map(e=>eb(e.elements.element))},150),S=()=>{w>=1||(o({type:"overlay/dragUpdateSkeleton",skeleton:eT(e$,r,w)}),o({type:"overlay/dragToggleMinimapPrompt",display:!1}),eN(v,w,b,o,150).then(()=>{setTimeout(()=>{o({type:"overlay/dragUpdateGroupRect",groupRect:ej(l)})},300)}))},A=e=>{Math.abs(e.deltaY)>=10&&w<1&&!eP&&!E&&!p&&k&&(o({type:"overlay/dragToggleMinimapPrompt",display:!0}),E=!0),!e.shiftKey||eP||p||(window.dispatchEvent(new CustomEvent("unstable_sanity/dragApplyMinimap")),eP=!0,setTimeout(()=>{S()},50))},O=e=>{if(e.preventDefault(),e_=function(e){let t=document.body,n=window.getComputedStyle(t).transform;if("none"===n)return{x:e.x,y:e.y};let r=new DOMMatrix(n).inverse(),i=new DOMPoint(e.x,e.y).matrixTransform(r);return{x:i.x,y:i.y}}(e$=eM(e)),4>Math.abs(eE(e$,g)))return;if(!x){let e=ej(l),t=eT(e$,r,1);o({type:"overlay/dragStart",flow:c}),o({type:"overlay/dragUpdateSkeleton",skeleton:t}),o({type:"overlay/dragUpdateGroupRect",groupRect:e}),x=!0,s()}o({type:"overlay/dragUpdateCursorPosition",x:e$.x,y:e$.y}),!e.shiftKey||eP||p||(window.dispatchEvent(new CustomEvent("unstable_sanity/dragApplyMinimap")),eP=!0,setTimeout(()=>{S()},50));let t=function(e,t,n){if("horizontal"===n){let r={x1:e.x,y1:e.y,x2:e.x-1e8,y2:e.y},i={x1:e.x,y1:e.y,x2:e.x+1e8,y2:e.y};return{left:ek(r,t,n),right:ek(i,t,n)}}{let r={x1:e.x,y1:e.y,x2:e.x,y2:e.y-1e8},i={x1:e.x,y1:e.y,x2:e.x,y2:e.y+1e8};return{top:ek(r,t,n),bottom:ek(i,t,n)}}}(e$,l,c);JSON.stringify(h)!==JSON.stringify(t)&&o({type:"overlay/dragUpdateInsertPosition",insertPosition:eO(i,h=t,c)})},M=()=>{k=!1,o({type:"overlay/dragEnd",target:a,insertPosition:h?eO(i,h,c):null,dragGroup:d,flow:c,preventInsertDefault:y}),E&&o({type:"overlay/dragToggleMinimapPrompt",display:!1}),eP||(clearInterval(I),u(),P(),L()),j()},T=e=>{"Shift"===e.key&&eP&&(eP=!1,o({type:"overlay/dragUpdateSkeleton",skeleton:eT(e$,r,1/w)}),window.dispatchEvent(new CustomEvent("unstable_sanity/dragResetMinimap")),setTimeout(()=>{eL(e_.y,v,eC,o,150,eR)},50),o({type:"overlay/dragUpdateGroupRect",groupRect:null}),k||(clearInterval(I),j(),P(),L(),u()))},N=()=>{o({type:"overlay/dragUpdateGroupRect",groupRect:null}),window.dispatchEvent(new CustomEvent("unstable_sanity/dragResetMinimap")),setTimeout(()=>{eL(e_.y,v,eC,o,150,eR).then(()=>{eP=!1})},50),clearInterval(I),j(),P(),L(),u()},j=()=>{window.removeEventListener("mousemove",O),window.removeEventListener("wheel",A),window.removeEventListener("mouseup",M)},L=()=>{window.removeEventListener("keyup",T)},P=()=>{window.removeEventListener("blur",N)};window.addEventListener("blur",N),window.addEventListener("keyup",T),window.addEventListener("wheel",A),window.addEventListener("mousemove",O),window.addEventListener("mouseup",M)}({element:b,handler:e,mouseEvent:t,overlayGroup:a,target:o,onSequenceStart:()=>{f=!0},onSequenceEnd:()=>{setTimeout(()=>{f=!1},250)}})},mousemove(e){k.mouseenter(e);let t=e.currentTarget;t&&(t.addEventListener("mouseenter",k.mouseenter),t.addEventListener("mouseleave",k.mouseleave))},mouseenter(){document.querySelector("vercel-live-feedback")&&b.closest("[data-vercel-edit-info]")||b.closest("[data-vercel-edit-target]")||(m.push(b),e({type:"element/mouseenter",id:I,rect:eb(b)}),w(b))},mouseleave(n){function r(){m.pop();let t=h();if(e({type:"element/mouseleave",id:I}),t){w(t);let n=s.get(t);n&&e({type:"element/mouseenter",id:n.id,rect:eb(t)})}x(b)}let{relatedTarget:i}=n,o=eD(i),a=t.contains(o);if(eU(o)&&a)return function e(t){let n=i=>{let{relatedTarget:o}=i;eD(o)?o&&eU(o)&&(t.removeEventListener("mouseleave",n),e(o)):(t.removeEventListener("mouseleave",n),r())};t.addEventListener("mouseleave",n)}(o);r()}},I=ev(),S={type:c,id:I,elements:d,sanity:y,handlers:k};u.add(b),l.set(E,b),a.set(I,b),s.set(b,S),p?.observe(b),e({type:"element/register",elementType:c,id:I,element:b,rect:eb(b),sanity:y,dragDisabled:!!b.getAttribute("data-sanity-drag-disable"),targets:g.map(e=>({sanity:e.sanity,element:e.elements.element}))}),o&&v(S)}(d)}}function k(t){let n=s.get(t);if(n){let{id:r,handlers:i}=n;g(t,i),d.unobserve(t),s.delete(t),u.delete(t),a.delete(r),e({type:"element/unregister",id:r})}}function I(t){let n=s.get(t);n&&e({type:"element/updateRect",id:n.id,rect:eb(t)})}function S(e){if(o)for(let t of e){let{target:e}=t,n=eU(e)&&s.get(e);n&&(t.isIntersecting?v(n):b(n))}}function A(t){let n=eD(t.target);if(n){"capture"===n.dataset.sanityOverlayElement&&(t.preventDefault(),t.stopPropagation());return}m=[],e({type:"overlay/blur"})}function O(){m=[],e({type:"overlay/reset-mouse-state"})}function M(){for(let e of u)I(e)}function T(t){"Escape"===t.key&&(m=[],e({type:"overlay/blur"}))}function N(e){let{target:t}=e;if(!(t===window.document||!eU(t)))for(let e of u)t.contains(e)&&I(e)}function j(){o||(p=new IntersectionObserver(S,{threshold:.3}),u.forEach(e=>p.observe(e)),e({type:"overlay/activate"}),o=!0)}function L(){o&&(p?.disconnect(),u.forEach(e=>{let t=s.get(e);t&&b(t)}),e({type:"overlay/deactivate"}),o=!1)}function P(t){let{id:n}=t.detail,r=a.get(n);if(!r)return;let i=s.get(r)?.sanity;i&&e({type:"element/click",id:n,sanity:i})}return window.document.fonts.ready.then(()=>{for(let e of u)I(e)}),window.addEventListener("click",A),window.addEventListener("contextmenu",A),window.addEventListener("sanity-overlay/exclusive-plugin-closed",O),window.addEventListener("sanity-overlay/label-click",P),window.addEventListener("keydown",T),window.addEventListener("resize",M),window.addEventListener("scroll",N,{capture:!0,passive:!0}),d=new ResizeObserver(function(e){for(let t of e){let e=t.target;if(eU(e)){let t=l.get(e);if(!t)return;I(t)}}}),(y=new MutationObserver(function(e){let n=!1;for(let r of e){let{target:e,type:i}=r,o="characterData"===i?e.parentElement:e;if(!(o===t||t.contains(o))&&(n=!0,eU(o))){let e=o.parentElement?.closest("[data-sanity-edit-group]")||null;E({childNodes:[eU(e)?e:o]})}}if(n)for(let e of u)e.isConnected||k(e),s.get(e)?.type!=="group"||e.hasAttribute("data-sanity-edit-group")||k(e)})).observe(document.body,{attributes:!0,characterData:!0,childList:!0,subtree:!0}),E(document.body),j(),{activate:j,deactivate:L,destroy:function(){window.removeEventListener("click",A),window.removeEventListener("contextmenu",A),window.removeEventListener("sanity-overlay/exclusive-plugin-closed",O),window.removeEventListener("sanity-overlay/label-click",P),window.removeEventListener("keydown",T),window.removeEventListener("resize",M),window.removeEventListener("scroll",N),y.disconnect(),d.disconnect(),u.forEach(e=>{k(e)}),a.clear(),u.clear(),m=[],L()}}}let eK=(0,c.createContext)(null);e.s(["SharedStateContext",()=>eK,"createOverlayController",()=>eB,"sanityNodesExistInSameArray",()=>eJ,"useOptimistic",()=>ef,"v4",()=>ev],951456)}]);